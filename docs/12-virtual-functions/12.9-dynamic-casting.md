# 12.9åŠ¨æ€ç±»å‹è½¬æ¢

æ—©åœ¨[ç¬¬6.16è¯¾â€”â€”æ˜¾å¼ç±»å‹è½¬æ¢ï¼ˆcastingï¼‰å’Œstatic_cast]()ä¸­ï¼Œæˆ‘ä»¬ç ”ç©¶äº† casting çš„æ¦‚å¿µï¼Œä»¥åŠä½¿ç”¨ static_cast å°†å˜é‡ä»ä¸€ç§ç±»å‹è½¬æ¢ä¸ºå¦ä¸€ç§ç±»å‹ã€‚

åœ¨æœ¬è¯¾ä¸­ï¼Œæˆ‘ä»¬å°†ç»§ç»­ç ”ç©¶å¦ä¸€ç§ç±»å‹çš„å¼ºåˆ¶è½¬æ¢ï¼šåŠ¨æ€ç±»å‹è½¬æ¢ (Dynamic cast)

## ä½•æ—¶éœ€è¦è¿›è¡ŒåŠ¨æ€ç±»å‹è½¬æ¢

åœ¨å¤„ç†å¤šæ€æ€§æ—¶ï¼Œæ‚¨ç»å¸¸ä¼šé‡åˆ°è¿™æ ·çš„æƒ…å†µï¼šä½ æœ‰ä¸€ä¸ªæŒ‡å‘åŸºç±»çš„æŒ‡é’ˆï¼Œä½†ä½ å¸Œæœ›è®¿é—®ä»…å­˜åœ¨äºæ´¾ç”Ÿç±»ä¸­çš„æŸäº›ä¿¡æ¯ã€‚

æ€è€ƒä¸‹åˆ—è¿™ä¸ªï¼ˆä¸å¤ªè‡ªç„¶çš„ï¼‰ä¾‹å­

```c++
# include <iostream>
# include <string>

class Base
{
protected:
 int m_value;

public:
 Base(int value)
  : m_value(value)
 {
 }

 virtual ~Base() {}
};

class Derived : public Base
{
protected:
 std::string m_name;

public:
 Derived(int value, std::string name)
  : Base(value), m_name(name)
 {
 }

 const std::string& getName() const { return m_name; }
};

Base* getObject(bool bReturnDerived)
{
 if (bReturnDerived)
  return new Derived(1, "Apple");
 else
  return new Base(2);
}

int main()
{
 Base *b = getObject(true);

 // æˆ‘ä»¬åº”è¯¥å¦‚ä½•æ‰“å°æ´¾ç”Ÿç±»å¯¹è±¡çš„åå­—ï¼Ÿåªæœ‰åŸºç±»æŒ‡é’ˆ

 delete b;

 return 0;
}
```

åœ¨è¿™ä¸ªç¨‹åºä¸­ï¼Œå‡½æ•° `getObject()` æ€»æ˜¯è¿”å›ä¸€ä¸ªåŸºç±»æŒ‡é’ˆï¼Œä½†æ˜¯è¿™ä¸ªæŒ‡é’ˆå¯èƒ½æŒ‡å‘ä¸€ä¸ªåŸºç±»ä¹Ÿå¯èƒ½æŒ‡å‘ä¸€ä¸ªæ´¾ç”Ÿç±»ã€‚åœ¨ä¾‹å­ä¸­çš„ `Base` æŒ‡é’ˆ `b` å®é™…æŒ‡å‘çš„æ˜¯æ´¾ç”Ÿç±»çš„å¯¹è±¡ï¼Œæˆ‘ä»¬åº”è¯¥å¦‚ä½•è°ƒç”¨ `Derived::getName()` ï¼Ÿ

ä¸€ä¸ªæ–¹æ³•ä¼šæ˜¯æ·»åŠ ä¸€ä¸ªè™šå‡½æ•°åˆ° `Base` ç±»ï¼Œå« `getName()`ï¼ˆè¿™æ ·åšæˆ‘ä»¬å¯ä»¥è°ƒç”¨å®ƒï¼Œé€šè¿‡ `Base`çš„æŒ‡é’ˆæˆ–å¼•ç”¨ï¼Œå®ƒéƒ½ä¼šåŠ¨æ€å®šå‘åˆ° `Derived::getName()`ï¼‰ã€‚ä½†æ˜¯å¦‚æœä½ è°ƒç”¨çš„å¯¹è±¡æ˜¯ä¸€ä¸ª `Base` ç±»çš„æŒ‡é’ˆä¼šå¼•ç”¨ï¼ŒæŒ‡å‘ä¸€ä¸ª `Base` å¯¹è±¡ï¼Œé‚£å°†ä¼šè¿”å›ä»€ä¹ˆï¼Ÿæ²¡æœ‰ä»»ä½•å€¼çœŸæ­£æœ‰ä»·å€¼ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬å°†ä¼šç”¨ä¸€äº›ä¸œè¥¿æ±¡æŸ“æˆ‘ä»¬çš„ `Base` ç±»ï¼Œè¿™äº›çš„ä¸œè¥¿æœ¬æ¥åº”è¯¥åªåœ¨æ´¾ç”Ÿç±»ä¸­å­˜åœ¨ã€‚

æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œ`C++` å°†ä¼šéšå¼çš„è®©ä½ è½¬åŒ–ä¸€ä¸ªæ´¾ç”Ÿç±»æŒ‡é’ˆä¸ºä¸€ä¸ªåŸºç±»æŒ‡æ­£ã€‚ï¼ˆäº‹å®ä¸Šï¼Œ`getObjectt()` å°±åšäº†é‚£æ ·çš„äº‹æƒ…ï¼‰ã€‚è¿™ç§è¿‡ç¨‹æœ‰æ—¶å€™è¢«å«åšå‘ä¸Šè½¬åŒ–ã€‚ç„¶è€Œï¼Œå¦‚æœæœ‰ä¸€ä¸ªæ–¹æ³•æŠŠ `Base` æŒ‡é’ˆè½¬æ¢å› `Derived` æŒ‡é’ˆä¼šæ€ä¹ˆæ ·ï¼Ÿç„¶åæˆ‘ä»¬èƒ½å¤Ÿç›´æ¥é€šè¿‡é‚£ä¸ªæŒ‡é’ˆæ¥è°ƒç”¨ `Derived::getName()`ï¼Œè¿™æ ·å°±æ ¹æœ¬ä¸ç”¨å…³å¿ƒè™šå‡½æ•°è§£æã€‚

## åŠ¨æ€ç±»å‹è½¬åŒ– (Dynamic Cast)

`C++` æä¾›äº†ä¸€ä¸ªè½¬æ¢æ“ä½œç¬¦ï¼Œå«åšåŠ¨æ€è½¬åŒ–ï¼Œå°±å¯ä»¥åœ¨è¿™ä¸ªæ¡ä»¶ä¸‹ä½¿ç”¨ã€‚å°½ç®¡åŠ¨æ€è½¬åŒ–æœ‰å¾ˆå¤šä¸åŒçš„èƒ½åŠ›ï¼Œç›®å‰ä¸ºæ­¢æˆ‘ä»¬æœ€å¸¸è§çš„ä½¿ç”¨åœºæ™¯å°±æ˜¯ä¸ºäº†è½¬åŒ–ä¸€ä¸ªåŸºç±»æŒ‡é’ˆæˆä¸€ä¸ªæ´¾ç”Ÿç±»æŒ‡é’ˆã€‚è¿™ä¸ªè¿‡ç¨‹å«åšå‘ä¸‹ç±»å‹è½¬æ¢ã€‚

Using dynamic_cast works just like static_cast. Hereâ€™s our example main() from above, using a dynamic_cast to convert our Base pointer back into a Derived pointer:

åŠ¨æ€ç±»å‹è½¬æ¢å°±åƒé™æ€ç±»å‹è½¬æ¢ä¸€æ ·ã€‚è¿™æ˜¯æˆ‘ä»¬ä¸Šé¢çš„ `main()` å‡½æ•°çš„ä¾‹å­ï¼Œä½¿ç”¨åŠ¨æ€ç±»å‹è½¬åŒ–ï¼Œå°† `Base` æŒ‡é’ˆç±»å‹è½¬åŒ–æˆ `Derived` æŒ‡é’ˆã€‚

```c++
int main()
{
 Base *b = getObject(true);

 Derived *d = dynamic_cast<Derived*>(b); // use dynamic cast to convert Base pointer into Derived pointer

 std::cout << "The name of the Derived is: " << d->getName() << '\n';

 delete b;

 return 0;
}
```

è¿™ä¸ªç”¨ä¾‹æ‰“å°å‡ºï¼š

```bash
The name of the Derived is: Apple
```

## åŠ¨æ€ç±»å‹è½¬æ¢å¤±è´¥ (Dynamic Cast Failure)

ä¸Šé¢çš„ä¾‹å­èƒ½è¿è¡Œå› ä¸º `b` ç¡®å®æŒ‡å‘äº†ä¸€ä¸ª `Derived` å¯¹è±¡ï¼Œå› æ­¤è½¬åŒ– `b` æˆä¸ºä¸€ä¸ªæ´¾ç”ŸæŒ‡é’ˆä¼šæˆåŠŸã€‚

ç„¶è€Œï¼Œæˆ‘ä»¬åšäº†ä¸€ä¸ªç›¸å½“å±é™©çš„å‡è®¾ï¼šé‚£å°±æ˜¯ `b` ç¡®å®æ˜¯æŒ‡å‘äº†æ´¾ç”Ÿç±»ã€‚å¦‚æœ `b` ä¸æ˜¯æŒ‡å‘æ´¾ç”Ÿå¯¹è±¡çš„ï¼Œå°†ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿè¿™å¾ˆå®¹æ˜“éªŒè¯ï¼Œå°† `getObject()` çš„å‚æ•°ä» `true` æ”¹ä¸º `false`ã€‚åœ¨é‚£ä¸ªä¾‹å­é‡Œï¼Œ`getObject()` å°†ä¼šè¿”å›ä¸€ä¸ªåŸºç±»æŒ‡é’ˆæŒ‡å‘ä¸€ä¸ªåŸºç±»å¯¹è±¡ã€‚å½“æˆ‘ä»¬å°è¯•ä½¿ç”¨åŠ¨æ€è½¬æ¢`dynamic_cast` è½¬åŒ–æˆä¸€ä¸ªæ´¾ç”Ÿå¯¹è±¡çš„æ—¶å€™ï¼Œå°†ä¼šå¤±è´¥ï¼Œå› ä¸ºè½¬åŒ–ä¸å¯èƒ½æˆåŠŸã€‚

å¦‚æœåŠ¨æ€è½¬åŒ–å¤±è´¥ï¼Œè½¬åŒ–ç»“æœä¼šæ˜¯ä¸€ä¸ª `null` æŒ‡é’ˆã€‚

å› ä¸ºæˆ‘ä»¬æ²¡æœ‰æ£€æŸ¥ç»“æœæ˜¯å¦æ˜¯ç©ºæŒ‡é’ˆï¼Œæˆ‘ä»¬è®¿é—® `d->getName()`ï¼Œå°†ä¼šå°è¯•é—´å€ä¸€ä¸ªç©ºæŒ‡é’ˆï¼Œå°†ä¼šå¯¼è‡´ä¸€ä¸ªæœªå®šä¹‰çš„æ“ä½œï¼Œå¯èƒ½ä¼šé€ æˆå´©æºƒã€‚

ä¸ºäº†è®©è¿™ä¸ªç¨‹åºå®‰å…¨è¿è¡Œï¼Œæˆ‘ä»¬éœ€è¦å»ç¡®è®¤åŠ¨æ€è½¬æ¢ç¡®å®æˆåŠŸäº†ã€‚

```c++
int main()
{
 Base *b = getObject(true);

Derived *d = dynamic_cast<Derived*>(b); // use dynamic cast to convert Base pointer into Derived pointer

if (d){ // make sure d is non-null
    std::cout << "The name of the Derived is: " << d->getName() << '\n';
}
 delete b;

 return 0;
}
```

**è§„åˆ™ï¼š** æ€»æ˜¯é€šè¿‡æ£€æŸ¥ç©ºæŒ‡é’ˆæ¥ç¡®ä¿çš„åŠ¨æ€è½¬æ¢æˆåŠŸäº†ã€‚

æ³¨æ„åˆ°å› ä¸ºåŠ¨æ€è½¬æ¢åœ¨è¿è¡Œæ—¶åšäº†ä¸€äº›ä¸€è‡´æ€§(consisitency)æ£€æŸ¥ï¼ˆæ¥ç¡®ä¿è½¬æ¢æ˜¯å¯è¡Œçš„ï¼‰ï¼Œä½¿ç”¨åŠ¨æ€è½¬æ¢ä¼šå¼•èµ·ä¸€äº›æ€§èƒ½æŸå¤±(performance penalty).

ä¹Ÿè¯·æ³¨æ„ï¼Œåœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œä½¿ç”¨åŠ¨æ€è½¬æ¢ (dynamic_cast) è¿›è¡Œå‘ä¸‹è½¬æ¢ (downcasting)æ—¶å°†æ— æ³•å·¥ä½œï¼š

1ï¼‰ä½¿ç”¨ protected æˆ–è€… private ç»§æ‰¿çš„ã€‚
2ï¼‰æ²¡æœ‰ç”³æ˜æˆ–è€…ç»§æ‰¿ä»»ä½•è™šå‡½æ•°çš„ï¼ˆå¹¶ä¸”å› æ­¤æ²¡æœ‰è™šè¡¨ï¼‰ã€‚
3ï¼‰åœ¨ç‰¹å®šçš„ä¾‹å­ä¸‹è®¾è®¡è™šåŸºç±»çš„è½¬åŒ–ã€‚ï¼ˆçœ‹è¿™é¡µçš„ä¾‹å­ä¸­ä½¿ç”¨çš„è¿™äº›ç±»ï¼Œå’Œå¦‚ä½• resove ä»–ä»¬ï¼‰ã€‚

## ä½¿ç”¨é™æ€ç±»å‹è½¬æ¢è¿›è¡Œå‘ä¸‹è½¬åŒ– (Downcasting with static_cast)

äº‹å®è¯æ˜ï¼Œå‘ä¸‹è½¬æ¢ä¹Ÿå¯ä»¥ç”±é™æ€è½¬æ¢ `static_cast` æ¥å®Œæˆã€‚å®ƒä»¬äºŒè€…çš„ä¸»è¦çš„åŒºåˆ«å°±æ˜¯ `static_cast`ä¸åšè¿è¡Œæ—¶ç±»å‹æ£€æŸ¥æ¥ç¡®ä¿ä½ æ‰€åšçš„äº‹æœ‰æ„ä¹‰ã€‚è¿™ä½¿å¾—ä½¿ç”¨ `static_cast` æ›´å¿«ï¼Œä½†æ˜¯æ›´å±é™©ï¼Œå¦‚æœä½ å°è¯•è½¬åŒ– `Base*` æˆä¸€ä¸ª `Derived*`ï¼Œå¯èƒ½ä¼šâ€œæˆåŠŸâ€å³ä½¿`Base`æŒ‡é’ˆå¹¶æ²¡æœ‰æŒ‡å‘`Derived` å¯¹è±¡ã€‚è¿™ä¼šé€ æˆæœªçŸ¥çš„è¡Œä¸ºï¼Œå½“ä½ å°è¯•è®¿é—®è½¬åŒ–ç»“æœæ—¶ã€‚ï¼ˆæŒ‡é’ˆä»ç„¶æŒ‡å‘ `Base` å¯¹è±¡ï¼‰ã€‚

å¦‚æœä½ å¾ˆæ˜ç¡®ä½ æ‰€ä½¿ç”¨çš„æŒ‡é’ˆå‘ä¸‹è½¬æ¢å°†ä¼šæˆåŠŸï¼Œç›´æ¥ä½¿ç”¨ `static_cast` æ˜¯å¯ä»¥æ¥å—çš„ã€‚å”¯ä¸€èƒ½ç¡®ä¿ä½ çŸ¥é“æŒ‡é’ˆæŒ‡å‘çš„ç±»å‹çš„æ–¹æ³•ï¼Œå°±æ˜¯ä½¿ç”¨ä¸€ä¸ªè™šå‡½æ•°ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªï¼ˆä¸æ˜¯å¾ˆå¥½ï¼Œä½¿ç”¨äº†å…¨å±€å˜é‡ï¼‰çš„æ–¹æ³•æ¥åšè¿™ä»¶äº‹ã€‚

```c++

# include <iostream>

# include <string>

// Class identifier
enum ClassID
{
 BASE,
 DERIVED
 // Others can be added here later
};

class Base
{
protected:
 int m_value;

public:
 Base(int value)
  : m_value(value)
 {
 }

 virtual ~Base() {}
 virtual ClassID getClassID() const { return BASE; }
};

class Derived : public Base
{
protected:
 std::string m_name;

public:
 Derived(int value, std::string name)
  : Base(value), m_name(name)
 {
 }

 const std::string& getName() const { return m_name; }
 virtual ClassID getClassID() const { return DERIVED; }

};

Base* getObject(bool bReturnDerived)
{
 if (bReturnDerived)
  return new Derived(1, "Apple");
 else
  return new Base(2);
}

int main()
{
 Base *b = getObject(true);

 if (b->getClassID() == DERIVED)
 {
  // æˆ‘ä»¬æ—©å°±è¯æ˜äº† b æ˜¯ä¸€ä¸ªæŒ‡å‘æ´¾ç”Ÿç±»å¯¹è±¡ï¼Œæ‰€ä»¥è¿™ä¸ªæ€»æ˜¯æˆåŠŸã€‚
  Derived *d = static_cast<Derived*>(b);
  std::cout << "The name of the Derived is: " << d->getName() << '\n';
 }

 delete b;

 return 0;
}
```

ä½†æ˜¯å¦‚æœä½ æƒ³ç»å†æ‰€æœ‰éº»çƒ¦æ¥å®ç°è¿™ä¸ªï¼ˆå¹¶ä¸”èŠ±è´¹è°ƒç”¨è™šå‡½æ•°å¹¶ä¸”å¤„ç†ç»“æœçš„ç²¾åŠ›ï¼‰ï¼Œæˆ‘æƒ³ä½ è¿˜æ˜¯å°±ç”¨åŠ¨æ€è½¬æ¢ (dynamic_cast) æ¯”è¾ƒå¥½ã€‚

## åŠ¨æ€è½¬åŒ–å’Œå¼•ç”¨ (dynamic_cast and references)

å°½ç®¡æ‰€æœ‰ä»¥ä¸Šçš„ä¾‹å­éƒ½æè¿°äº†åŠ¨æ€è½¬åŒ–æŒ‡é’ˆï¼ˆè¿™å¾ˆå¸¸ç”¨ï¼‰ï¼ŒåŠ¨æ€è½¬åŒ–ä¹Ÿå¯ä»¥è¢«ç”¨åœ¨å¼•ç”¨ä¸Šã€‚è¿™ä¸ªçš„ç”¨æ³•å’Œç”¨åœ¨æŒ‡é’ˆä¸Šå·®ä¸å¤šã€‚

```c++

# include <iostream>

# include <string>

class Base
{
protected:
 int m_value;

public:
 Base(int value)
  : m_value(value)
 {
 }

 virtual ~Base() {}
};

class Derived : public Base
{
protected:
 std::string m_name;

public:
 Derived(int value, std::string name)
  : Base(value), m_name(name)
 {
 }

 const std::string& getName() const { return m_name; }
};

int main()
{
 Derived apple(1, "Apple"); // create an apple
 Base &b = apple; // set base reference to object
 Derived &d = dynamic_cast<Derived&>(b); // dynamic cast using a reference instead of a pointer

 std::cout << "The name of the Derived is: " << d.getName() << '\n'; // we can access Derived::getName through d

 return 0;
}

```

å› ä¸º `C++` æ²¡æœ‰â€œç©ºå¼•ç”¨â€çš„è¯´æ³•ï¼ŒåŠ¨æ€è½¬åŒ–ä¸å¯èƒ½è¿”å›ä¸€ä¸ªç©ºå¼•ç”¨å¦‚æœé­é‡å¤±è´¥ã€‚ç›¸åçš„ï¼Œå¦‚æœåŠ¨æ€è½¬åŒ–ä¸€ä¸ªå¼•ç”¨å¤±è´¥äº†ï¼Œä¸€ä¸ªå¼‚å¸¸`std::bad_cast`å°†ä¼šæŠ›å‡ºã€‚æˆ‘ä»¬ä¼šåœ¨ä¹‹åçš„æ•™ç¨‹è®¨è®ºå¼‚å¸¸ã€‚

## åŠ¨é™æ€è½¬åŒ–çš„å¯¹æ¯” (dynamic_cast vs static_cast)

æ–°çš„ç¨‹åºå‘˜æœ‰æ—¶å€™å¾ˆè¿·æƒ‘å•¥æ—¶å€™ç”¨åŠ¨æ€è½¬æ¢ï¼Œå•¥æ—¶å€™ç”¨é™æ€è½¬æ¢ã€‚ç­”æ¡ˆéå¸¸ç®€å•ï¼šä½¿ç”¨ `static_cast` é™¤éä½ æ­£åœ¨å‘ä¸‹è½¬æ¢ï¼Œè¿™æ˜¯ä½¿ç”¨ `dynamic_cast` é€šå¸¸æ˜¯ä¸€ä¸ªæ›´å¥½çš„é€‰æ‹©ã€‚ç„¶è€Œï¼Œä½ ä¹Ÿå°…ä¸€è€ƒè™‘é¿å…è½¬æ¢ï¼Œå°±æ˜¯ç”¨è™šå‡½æ•°ã€‚

## å‘ä¸‹è½¬æ¢å’Œè™šå‡½æ•°çš„å¯¹æ¯”

æœ‰äº›å¼€å‘è€…ç›¸ä¿¡åŠ¨æ€è½¬æ¢æ˜¯æ¶é­”ğŸ‘¿å¹¶ä¸”æ˜¯åçš„ç±»å‹è®¾è®¡ï¼Œè¿™äº›ç¨‹åºå‘˜è¯´æ°¸è¿œåº”è¯¥ä½¿ç”¨è™šå‡½æ•°ã€‚

å¤§ä½“ä¸Šï¼Œä½¿ç”¨è™šå‡½æ•°åº”è¯¥æ›´å—æ¬¢è¿æ¯”èµ·å‘ä¸‹è½¬æ¢ã€‚ç„¶è€Œï¼Œè¿™äº›æƒ…å†µä¸‹ï¼Œä½¿ç”¨å‘ä¸‹è½¬æ¢æ˜¯ä¸€ä¸ªæ›´å¥½çš„é€‰æ‹©ï¼š

- å½“ä½ ä¸èƒ½ä¿®æ”¹åŸºç±»æ¥æ·»åŠ ä¸€ä¸ªè™šå‡½æ•°æ—¶ï¼ˆä¾‹å¦‚ï¼šå› ä¸ºåŸºç±»æ˜¯æ ‡å‡†åº“ä¸­çš„ä¸€ç§ï¼‰
- å½“ä½ ä»ç„¶éœ€è¦è®¿é—®ä¸€äº›åªæœ‰æ´¾ç”Ÿç±»ç‹¬æœ‰çš„ä¸œè¥¿æ—¶ï¼ˆä¾‹å¦‚ï¼šæŸä¸ªè®¿é—®å‡½æ•°åªå­˜åœ¨äºæ´¾ç”Ÿç±»ï¼‰
- å½“æ·»åŠ ä¸€ä¸ªè™šå‡½æ•°åˆ°ä½ çš„åŸºç±»æ¯«æ— æ„ä¹‰æ—¶ï¼ˆä¾‹å¦‚ï¼šæ²¡æœ‰ä¸€ä¸ªåˆé€‚çš„å€¼è®©åŸºç±»è¿”å›ï¼‰ä½¿ç”¨çº¯è™šå‡½æ•°ä¹Ÿè®¸å¯ä»¥çº³å…¥è€ƒè™‘ï¼Œå¦‚æœä½ ä¸è¦å®ä¾‹åŒ–åŸºç±»ã€‚

## ä¸€ä¸ªæœ‰å…³åŠ¨æ€ç±»å‹è½¬æ¢å’ŒRTTIçš„è­¦å‘Š (A warning about dynamic_cast and RTTI)

è¿è¡Œæ—¶ç±»å‹ä¿¡æ¯ï¼ˆRTTIï¼‰æ˜¯ä¸€ä¸ª `C++` çš„ç‰¹æ€§ï¼Œç”¨äºåœ¨è¿è¡Œæ—¶æš´éœ²ä¸€ä¸ªå¯¹è±¡çš„æ•°æ®ç±»å‹ã€‚è¿™è¿™ä¸ªèƒ½åŠ› `dynamic_cast` èµ‹äºˆçš„ã€‚å› ä¸ºè¿è¡Œæ—¶æœ‰ç›¸å½“å¯è§‚çš„ç©ºé—´æ€§èƒ½æˆæœ¬ï¼Œä¸€äº›ç¼–è¯‘å™¨å…è®¸ä½ å…³é—­ RTTI æ¥åšä¸ºä¸€ä¸ªä¼˜åŒ–ï¼Œä¸ç”¨è¯´ï¼Œå¦‚æœä½ é‚£ä¹ˆåšï¼ŒåŠ¨æ€ç±»å‹è½¬æ¢å°†ä¸ä¼šæ­£å¸¸å·¥ä½œã€‚
